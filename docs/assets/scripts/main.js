window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};window.ProfileBook.config = {	resizeWait : 333,	menu : {		activeClassName : "is-active",		size : function(){			return window.matchMedia('(max-width:480px)').matches ? 350 : 700;		}	},	logo : {		size : 600,		dot : {			className : "u-text_dot"		}	},	headPanel : {		query : "#head_panel"	},	scrollPanel : {		query : ".c-content_panel__main"	},	contentPanel : {		rotateDuration : 1000	}};
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	window.ProfileBook.util = {		queryEach : function(query, func){			var elements = document.querySelectorAll(query);			for(var i=0; i<elements.length; i++){				(function(elm){					func(elm);				})(elements[i]);			}		},		overflowScrolling : function(element){			if(document.ontouchstart !== undefined){				// todo overflow-scrolling			}		}	};		var resizedTimer;	var resizedFunction = function(){		window.clearTimeout(resizedTimer);		resizedTimer = window.setTimeout(function(){			if(!!ProfileBook.on.resize && ProfileBook.on.resize.length > 0){				for(var i=0; i<ProfileBook.on.resize.length; i++){					if(typeof ProfileBook.on.resize[i] == "function"){						(ProfileBook.on.resize[i])();					}				}			}		}, ProfileBook.config.resizeWait)	};	ProfileBook.on.resize = ProfileBook.on.resize || new Array();	window.addEventListener("resize", resizedFunction, false);})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	var textsConfig = {		P : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 20, y : 40 },			{ x : 34, y : 43 },			{ x : 38, y : 54 },			{ x : 32, y : 64 },			{ x : 20, y : 66 }		],		O : [			{ x : 25, y : 39 },			{ x : 36, y : 42 },			{ x : 45, y : 50 },			{ x : 48, y : 62 },			{ x : 47, y : 74 },			{ x : 44, y : 86 },			{ x : 37, y : 95 },			{ x : 26, y : 99 },			{ x : 14, y : 42 },			{ x :  5, y : 50 },			{ x :  2, y : 62 },			{ x :  3, y : 74 },			{ x :  6, y : 86 },			{ x : 15, y : 94 }		],		R : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 19, y : 40 },			{ x : 30, y : 41 },			{ x : 38, y : 48 },			{ x : 39, y : 59 },			{ x : 32, y : 67 },			{ x : 19, y : 68 },			{ x : 30, y : 77 },			{ x : 36, y : 86 },			{ x : 42, y : 96 }		],		T : [			{ x :  0, y : 40 },			{ x : 13, y : 40 },			{ x : 26, y : 40 },			{ x : 39, y : 40 },			{ x : 19, y : 54 },			{ x : 19, y : 68 },			{ x : 19, y : 82 },			{ x : 19, y : 96 }		],		F : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 19, y : 40 },			{ x : 30, y : 40 },			{ x : 41, y : 40 },			{ x : 20, y : 67 },			{ x : 32, y : 67 }		],		L : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 21, y : 96 },			{ x : 33, y : 96 }		],		I : [			{ x : 11, y : 40 },			{ x : 11, y : 54 },			{ x : 11, y : 68 },			{ x : 11, y : 82 },			{ x : 11, y : 96 }		]	}	window.ProfileBook.setupLogo = function(target){		var dots = new Array();		var textStatus = new Array();		var tasks = {			removeDelimiter : function(){				for(var i=target.childNodes.length - 1; i>=0; i--){					if(target.childNodes[i].nodeType == document.TEXT_NODE && target.childNodes[i].nodeValue.match(/^\s+$/)){						target.removeChild(target.childNodes[i]);					}				}			},			calcPosition : function(){				for(var i=0; i<target.childNodes.length; i++){					textStatus.push({						x : target.childNodes[i].offsetLeft,						y : target.childNodes[i].offsetTop,						text : target.childNodes[i].getAttribute("data-logo-text"),						elm : target.childNodes[i]					});				}			},			deploy : function(){				for(var i=0; i<textStatus.length; i++){					var dotCoords = textsConfig[textStatus[i].text];					for(var j=0; j<dotCoords.length; j++){						dots.push((function(status, coord){							var dot = document.createElement("div");							dot.className = ProfileBook.config.logo.dot.className;							dot.style.left = status.x + coord.x + "px";							dot.style.top  = status.y + coord.y + "px";							target.appendChild(dot);							return dot;						})(textStatus[i], dotCoords[j]));					}					target.removeChild(textStatus[i].elm);				}								var subtitleText = target.getAttribute("data-subtitle");				var subtitleElement = document.createElement("div");				subtitleElement.className = "c-texture_logo__subtitle";				for(var i=0; i<subtitleText.length; i++){					(function(char){						var textDot = document.createElement("span");						textDot.className = "u-sub_text";						textDot.appendChild(document.createTextNode(char));						dots.push(textDot);						subtitleElement.appendChild(textDot);					})(subtitleText[i]);				}				target.appendChild(subtitleElement);			},			onActive : function(flag){				if(flag){					var distance = Math.pow(Math.pow(window.innerWidth, 2) + Math.pow(window.innerHeight, 2), 1/2);					for(var i=0; i<dots.length; i++){						(function(dot){							var angle = 2 * Math.PI * Math.random();							var centerX = Math.round(distance * Math.cos(angle));							var centerY = Math.round(distance * Math.sin(angle));							dot.classList.add("is-active");							dot.style.transformOrigin = centerX + "px " + centerY + "px";							dot.style.transform = "rotate(55deg)";						})(dots[i]);					}				}				else{					for(var i=0; i<dots.length; i++){						(function(dot){							dot.classList.remove("is-active");							dot.style.transform = "rotate(0deg)";						})(dots[i]);					}				}			},			adjustSize : function(){				var size = Math.min(ProfileBook.config.logo.size, Math.round(window.innerWidth * 0.8));				var scale = Math.round(100 * size / ProfileBook.config.logo.size) / 100;				target.style.transform = "scale(" + scale + ")";			}		};		tasks.removeDelimiter();		tasks.calcPosition();		tasks.deploy();		tasks.adjustSize();		window.ProfileBook.on.menuActive = tasks.onActive;				ProfileBook.on.resize = ProfileBook.on.resize || new Array();		ProfileBook.on.resize.push(tasks.adjustSize);	};})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	window.ProfileBook.setupMenu = function(target){		var isLocked = false;		var isActive = false;				var tasks = {			activate : function(flag){				if(typeof ProfileBook.on.menuActive == "function"){					ProfileBook.on.menuActive(flag);				}				(target.classList[flag ? "add" : "remove"])(ProfileBook.config.menu.activeClassName);				isActive = flag;			},			adjustSize : function(){				var menuSize = ProfileBook.config.menu.size()				var size = Math.min(menuSize, Math.round(window.innerHeight * 0.7), Math.round(window.innerWidth * 0.75));				var scale = Math.round(100 * size / menuSize) / 100;				target.parentNode.style.transform = "scale(" + scale + ")";			}		};				var anchors = target.querySelectorAll("A");		for(var i=0; i<anchors.length; i++){			anchors[i].addEventListener("click", function(event){				isLocked = true;			}, false);		}			target.addEventListener("mouseover", function(event){			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);		target.addEventListener("touchstart", function(event){			if(!isActive){				event.preventDefault();			}			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);				target.addEventListener("mouseout", function(event){			event.stopPropagation();			if(!isLocked){				tasks.activate(false);			}		}, false);		document.addEventListener("touchstart", function(event){			event.stopPropagation();			tasks.activate(false);		}, false);						tasks.adjustSize();		ProfileBook.on.resize = ProfileBook.on.resize || new Array();		ProfileBook.on.resize.push(tasks.adjustSize);	};})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	var headPanel, activePanel,link2top;	var tasks = {		init : function(){			link2top = document.getElementById("link2top");			activePanel = headPanel = document.querySelector(ProfileBook.config.headPanel.query);			tasks.transition();		},		transition : function(){			var hash = (!!window.location.hash && !!document.querySelector(window.location.hash)) ? window.location.hash : "";			var isHead = !window.location.hash || window.location.hash != hash;						if(isHead){				history.replaceState("root", null, location.pathname);				document.body.classList.remove("is-paged");				headPanel.classList.add("is-shown");				headPanel.classList.add("is-current");				link2top.classList.add("is-hidden");			}			else{				document.body.classList.add("is-paged");				headPanel.classList.remove("is-shown");				headPanel.classList.remove("is-current");				link2top.classList.remove("is-hidden");			}						if(!!hash && activePanel.id != "head_panel" && !isHead){				var prev = activePanel;				var next = document.querySelector(hash);								next.style.transform = "rotateY(0deg)";				prev.style.transform = "rotateY(-180deg)";				prev.classList.remove("is-current");				next.classList.add("is-current");				activePanel = next;								return;			}						var resetScrollPanel = function(panels, isScrollable){				for(var i=0; i<panels.length; i++){					(function(panel){						var scrollPanel = panel.querySelector(ProfileBook.config.scrollPanel.query);						if(!!scrollPanel){							scrollPanel.style.overflow = isScrollable ? "auto" : "hidden";						}					})(panels[i]);				}			};						if(!!hash && headPanel === activePanel){				activePanel.classList.remove("is-current");				activePanel = document.querySelector(hash);				activePanel.classList.add("is-current");								resetScrollPanel([activePanel, headPanel], false);				window.setTimeout((function(panel){					return function(){						resetScrollPanel([panel], true);					}				})(activePanel), ProfileBook.config.contentPanel.rotateDuration);								activePanel.style.transform = "rotateY(0deg)";				headPanel.style.transform = "rotateY(180deg)";							headPanel.classList.remove("is-shown");				return;			}			if(!hash && headPanel !== activePanel){				activePanel.classList.remove("is-current");								resetScrollPanel([activePanel, headPanel], false);				window.setTimeout((function(panel){					return function(){						resetScrollPanel([panel], true);					}				})(activePanel), ProfileBook.config.contentPanel.rotateDuration);								activePanel.style.transform = "rotateY(-180deg)";				headPanel.style.transform = "rotateY(0deg)";				headPanel.classList.add("is-shown");				activePanel = headPanel;				activePanel.classList.add("is-current");				return;			}		}	};		ProfileBook.initPageTransition = tasks.init;	ProfileBook.on.pageTransition = tasks.transition;})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};document.addEventListener("DOMContentLoaded", function(){	ProfileBook.initPageTransition();	ProfileBook.util.queryEach(".c-texture_logo", ProfileBook.setupLogo);	ProfileBook.util.queryEach(".c-main_menu__frame", ProfileBook.setupMenu);	ProfileBook.util.queryEach(".c-content_panel__main", ProfileBook.util.overflowScrolling);	window.addEventListener("hashchange", ProfileBook.on.pageTransition);}, false);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb25maWcuanMiLCJfdXRpbGl0eS5qcyIsIl9sb2dvX3RleHR1cmUuanMiLCJfbWVudV9wYW5lbC5qcyIsIl9wYWdlX3RyYW5zaXRpb24uanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUNBQTtBQ0FBO0FDQUE7QUNBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLmNvbmZpZyA9IHtcclx0cmVzaXplV2FpdCA6IDMzMyxcclx0bWVudSA6IHtcclx0XHRhY3RpdmVDbGFzc05hbWUgOiBcImlzLWFjdGl2ZVwiLFxyXHRcdHNpemUgOiBmdW5jdGlvbigpe1xyXHRcdFx0cmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOjQ4MHB4KScpLm1hdGNoZXMgPyAzNTAgOiA3MDA7XHJcdFx0fVxyXHR9LFxyXHRsb2dvIDoge1xyXHRcdHNpemUgOiA2MDAsXHJcdFx0ZG90IDoge1xyXHRcdFx0Y2xhc3NOYW1lIDogXCJ1LXRleHRfZG90XCJcclx0XHR9XHJcdH0sXHJcdGhlYWRQYW5lbCA6IHtcclx0XHRxdWVyeSA6IFwiI2hlYWRfcGFuZWxcIlxyXHR9LFxyXHRzY3JvbGxQYW5lbCA6IHtcclx0XHRxdWVyeSA6IFwiLmMtY29udGVudF9wYW5lbF9fbWFpblwiXHJcdH0sXHJcdGNvbnRlbnRQYW5lbCA6IHtcclx0XHRyb3RhdGVEdXJhdGlvbiA6IDEwMDBcclx0fVxyfTtcclxyIiwid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyXHIoZnVuY3Rpb24oKXtcclx0d2luZG93LlByb2ZpbGVCb29rLnV0aWwgPSB7XHJcdFx0cXVlcnlFYWNoIDogZnVuY3Rpb24ocXVlcnksIGZ1bmMpe1xyXHRcdFx0dmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSk7XHJcdFx0XHRmb3IodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRcdChmdW5jdGlvbihlbG0pe1xyXHRcdFx0XHRcdGZ1bmMoZWxtKTtcclx0XHRcdFx0fSkoZWxlbWVudHNbaV0pO1xyXHRcdFx0fVxyXHRcdH0sXHJcdFx0b3ZlcmZsb3dTY3JvbGxpbmcgOiBmdW5jdGlvbihlbGVtZW50KXtcclx0XHRcdGlmKGRvY3VtZW50Lm9udG91Y2hzdGFydCAhPT0gdW5kZWZpbmVkKXtcclx0XHRcdFx0Ly8gdG9kbyBvdmVyZmxvdy1zY3JvbGxpbmdcclx0XHRcdH1cclx0XHR9XHJcdH07XHJcdFxyXHR2YXIgcmVzaXplZFRpbWVyO1xyXHR2YXIgcmVzaXplZEZ1bmN0aW9uID0gZnVuY3Rpb24oKXtcclx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHJlc2l6ZWRUaW1lcik7XHJcdFx0cmVzaXplZFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclx0XHRcdGlmKCEhUHJvZmlsZUJvb2sub24ucmVzaXplICYmIFByb2ZpbGVCb29rLm9uLnJlc2l6ZS5sZW5ndGggPiAwKXtcclx0XHRcdFx0Zm9yKHZhciBpPTA7IGk8UHJvZmlsZUJvb2sub24ucmVzaXplLmxlbmd0aDsgaSsrKXtcclx0XHRcdFx0XHRpZih0eXBlb2YgUHJvZmlsZUJvb2sub24ucmVzaXplW2ldID09IFwiZnVuY3Rpb25cIil7XHJcdFx0XHRcdFx0XHQoUHJvZmlsZUJvb2sub24ucmVzaXplW2ldKSgpO1xyXHRcdFx0XHRcdH1cclx0XHRcdFx0fVxyXHRcdFx0fVxyXHRcdH0sIFByb2ZpbGVCb29rLmNvbmZpZy5yZXNpemVXYWl0KVxyXHR9O1xyXHRQcm9maWxlQm9vay5vbi5yZXNpemUgPSBQcm9maWxlQm9vay5vbi5yZXNpemUgfHwgbmV3IEFycmF5KCk7XHJcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHJlc2l6ZWRGdW5jdGlvbiwgZmFsc2UpO1xyfSkoKTtcclxyXHJcclxyIiwid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyXHIoZnVuY3Rpb24oKXtcclx0dmFyIHRleHRzQ29uZmlnID0ge1xyXHRcdFAgOiBbXHJcdFx0XHR7IHggOiA4LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDY4IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogODIgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA5NiB9LFxyXHRcdFx0eyB4IDogMjAsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMzQsIHkgOiA0MyB9LFxyXHRcdFx0eyB4IDogMzgsIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogMzIsIHkgOiA2NCB9LFxyXHRcdFx0eyB4IDogMjAsIHkgOiA2NiB9XHJcdFx0XSxcclx0XHRPIDogW1xyXHRcdFx0eyB4IDogMjUsIHkgOiAzOSB9LFxyXHRcdFx0eyB4IDogMzYsIHkgOiA0MiB9LFxyXHRcdFx0eyB4IDogNDUsIHkgOiA1MCB9LFxyXHRcdFx0eyB4IDogNDgsIHkgOiA2MiB9LFxyXHRcdFx0eyB4IDogNDcsIHkgOiA3NCB9LFxyXHRcdFx0eyB4IDogNDQsIHkgOiA4NiB9LFxyXHRcdFx0eyB4IDogMzcsIHkgOiA5NSB9LFxyXHRcdFx0eyB4IDogMjYsIHkgOiA5OSB9LFxyXHRcdFx0eyB4IDogMTQsIHkgOiA0MiB9LFxyXHRcdFx0eyB4IDogIDUsIHkgOiA1MCB9LFxyXHRcdFx0eyB4IDogIDIsIHkgOiA2MiB9LFxyXHRcdFx0eyB4IDogIDMsIHkgOiA3NCB9LFxyXHRcdFx0eyB4IDogIDYsIHkgOiA4NiB9LFxyXHRcdFx0eyB4IDogMTUsIHkgOiA5NCB9XHJcdFx0XSxcclx0XHRSIDogW1xyXHRcdFx0eyB4IDogOCwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiA4LCB5IDogNTQgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA2OCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDgyIH0sXHJcdFx0XHR7IHggOiA4LCB5IDogOTYgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDMwLCB5IDogNDEgfSxcclx0XHRcdHsgeCA6IDM4LCB5IDogNDggfSxcclx0XHRcdHsgeCA6IDM5LCB5IDogNTkgfSxcclx0XHRcdHsgeCA6IDMyLCB5IDogNjcgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogNjggfSxcclx0XHRcdHsgeCA6IDMwLCB5IDogNzcgfSxcclx0XHRcdHsgeCA6IDM2LCB5IDogODYgfSxcclx0XHRcdHsgeCA6IDQyLCB5IDogOTYgfVxyXHRcdF0sXHJcdFx0VCA6IFtcclx0XHRcdHsgeCA6ICAwLCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDEzLCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDI2LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDM5LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogNTQgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogNjggfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogODIgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogOTYgfVxyXHRcdF0sXHJcdFx0RiA6IFtcclx0XHRcdHsgeCA6IDgsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDU0IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogNjggfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA4MiB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDk2IH0sXHJcdFx0XHR7IHggOiAxOSwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiAzMCwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiA0MSwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiAyMCwgeSA6IDY3IH0sXHJcdFx0XHR7IHggOiAzMiwgeSA6IDY3IH1cclx0XHRdLFxyXHRcdEwgOiBbXHJcdFx0XHR7IHggOiA4LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDY4IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogODIgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA5NiB9LFxyXHRcdFx0eyB4IDogMjEsIHkgOiA5NiB9LFxyXHRcdFx0eyB4IDogMzMsIHkgOiA5NiB9XHJcdFx0XSxcclx0XHRJIDogW1xyXHRcdFx0eyB4IDogMTEsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMTEsIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogMTEsIHkgOiA2OCB9LFxyXHRcdFx0eyB4IDogMTEsIHkgOiA4MiB9LFxyXHRcdFx0eyB4IDogMTEsIHkgOiA5NiB9XHJcdFx0XVxyXHR9XHJcclx0d2luZG93LlByb2ZpbGVCb29rLnNldHVwTG9nbyA9IGZ1bmN0aW9uKHRhcmdldCl7XHJcdFx0dmFyIGRvdHMgPSBuZXcgQXJyYXkoKTtcclx0XHR2YXIgdGV4dFN0YXR1cyA9IG5ldyBBcnJheSgpO1xyXHRcdHZhciB0YXNrcyA9IHtcclx0XHRcdHJlbW92ZURlbGltaXRlciA6IGZ1bmN0aW9uKCl7XHJcdFx0XHRcdGZvcih2YXIgaT10YXJnZXQuY2hpbGROb2Rlcy5sZW5ndGggLSAxOyBpPj0wOyBpLS0pe1xyXHRcdFx0XHRcdGlmKHRhcmdldC5jaGlsZE5vZGVzW2ldLm5vZGVUeXBlID09IGRvY3VtZW50LlRFWFRfTk9ERSAmJiB0YXJnZXQuY2hpbGROb2Rlc1tpXS5ub2RlVmFsdWUubWF0Y2goL15cXHMrJC8pKXtcclx0XHRcdFx0XHRcdHRhcmdldC5yZW1vdmVDaGlsZCh0YXJnZXQuY2hpbGROb2Rlc1tpXSk7XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHR9XHJcdFx0XHR9LFxyXHRcdFx0Y2FsY1Bvc2l0aW9uIDogZnVuY3Rpb24oKXtcclx0XHRcdFx0Zm9yKHZhciBpPTA7IGk8dGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspe1xyXHRcdFx0XHRcdHRleHRTdGF0dXMucHVzaCh7XHJcdFx0XHRcdFx0XHR4IDogdGFyZ2V0LmNoaWxkTm9kZXNbaV0ub2Zmc2V0TGVmdCxcclx0XHRcdFx0XHRcdHkgOiB0YXJnZXQuY2hpbGROb2Rlc1tpXS5vZmZzZXRUb3AsXHJcdFx0XHRcdFx0XHR0ZXh0IDogdGFyZ2V0LmNoaWxkTm9kZXNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS1sb2dvLXRleHRcIiksXHJcdFx0XHRcdFx0XHRlbG0gOiB0YXJnZXQuY2hpbGROb2Rlc1tpXVxyXHRcdFx0XHRcdH0pO1xyXHRcdFx0XHR9XHJcdFx0XHR9LFxyXHRcdFx0ZGVwbG95IDogZnVuY3Rpb24oKXtcclx0XHRcdFx0Zm9yKHZhciBpPTA7IGk8dGV4dFN0YXR1cy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRcdFx0dmFyIGRvdENvb3JkcyA9IHRleHRzQ29uZmlnW3RleHRTdGF0dXNbaV0udGV4dF07XHJcdFx0XHRcdFx0Zm9yKHZhciBqPTA7IGo8ZG90Q29vcmRzLmxlbmd0aDsgaisrKXtcclx0XHRcdFx0XHRcdGRvdHMucHVzaCgoZnVuY3Rpb24oc3RhdHVzLCBjb29yZCl7XHJcdFx0XHRcdFx0XHRcdHZhciBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXHRcdFx0XHRcdFx0XHRkb3QuY2xhc3NOYW1lID0gUHJvZmlsZUJvb2suY29uZmlnLmxvZ28uZG90LmNsYXNzTmFtZTtcclx0XHRcdFx0XHRcdFx0ZG90LnN0eWxlLmxlZnQgPSBzdGF0dXMueCArIGNvb3JkLnggKyBcInB4XCI7XHJcdFx0XHRcdFx0XHRcdGRvdC5zdHlsZS50b3AgID0gc3RhdHVzLnkgKyBjb29yZC55ICsgXCJweFwiO1xyXHRcdFx0XHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoZG90KTtcclx0XHRcdFx0XHRcdFx0cmV0dXJuIGRvdDtcclx0XHRcdFx0XHRcdH0pKHRleHRTdGF0dXNbaV0sIGRvdENvb3Jkc1tqXSkpO1xyXHRcdFx0XHRcdH1cclx0XHRcdFx0XHR0YXJnZXQucmVtb3ZlQ2hpbGQodGV4dFN0YXR1c1tpXS5lbG0pO1xyXHRcdFx0XHR9XHJcdFx0XHRcdFxyXHRcdFx0XHR2YXIgc3VidGl0bGVUZXh0ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtc3VidGl0bGVcIik7XHJcdFx0XHRcdHZhciBzdWJ0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXHRcdFx0XHRzdWJ0aXRsZUVsZW1lbnQuY2xhc3NOYW1lID0gXCJjLXRleHR1cmVfbG9nb19fc3VidGl0bGVcIjtcclx0XHRcdFx0Zm9yKHZhciBpPTA7IGk8c3VidGl0bGVUZXh0Lmxlbmd0aDsgaSsrKXtcclx0XHRcdFx0XHQoZnVuY3Rpb24oY2hhcil7XHJcdFx0XHRcdFx0XHR2YXIgdGV4dERvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXHRcdFx0XHRcdFx0dGV4dERvdC5jbGFzc05hbWUgPSBcInUtc3ViX3RleHRcIjtcclx0XHRcdFx0XHRcdHRleHREb3QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2hhcikpO1xyXHRcdFx0XHRcdFx0ZG90cy5wdXNoKHRleHREb3QpO1xyXHRcdFx0XHRcdFx0c3VidGl0bGVFbGVtZW50LmFwcGVuZENoaWxkKHRleHREb3QpO1xyXHRcdFx0XHRcdH0pKHN1YnRpdGxlVGV4dFtpXSk7XHJcdFx0XHRcdH1cclx0XHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN1YnRpdGxlRWxlbWVudCk7XHJcdFx0XHR9LFxyXHRcdFx0b25BY3RpdmUgOiBmdW5jdGlvbihmbGFnKXtcclx0XHRcdFx0aWYoZmxhZyl7XHJcdFx0XHRcdFx0dmFyIGRpc3RhbmNlID0gTWF0aC5wb3coTWF0aC5wb3cod2luZG93LmlubmVyV2lkdGgsIDIpICsgTWF0aC5wb3cod2luZG93LmlubmVySGVpZ2h0LCAyKSwgMS8yKTtcclx0XHRcdFx0XHRmb3IodmFyIGk9MDsgaTxkb3RzLmxlbmd0aDsgaSsrKXtcclx0XHRcdFx0XHRcdChmdW5jdGlvbihkb3Qpe1xyXHRcdFx0XHRcdFx0XHR2YXIgYW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcdFx0XHRcdFx0XHRcdHZhciBjZW50ZXJYID0gTWF0aC5yb3VuZChkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSk7XHJcdFx0XHRcdFx0XHRcdHZhciBjZW50ZXJZID0gTWF0aC5yb3VuZChkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKSk7XHJcdFx0XHRcdFx0XHRcdGRvdC5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpO1xyXHRcdFx0XHRcdFx0XHRkb3Quc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gY2VudGVyWCArIFwicHggXCIgKyBjZW50ZXJZICsgXCJweFwiO1xyXHRcdFx0XHRcdFx0XHRkb3Quc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoNTVkZWcpXCI7XHJcdFx0XHRcdFx0XHR9KShkb3RzW2ldKTtcclx0XHRcdFx0XHR9XHJcdFx0XHRcdH1cclx0XHRcdFx0ZWxzZXtcclx0XHRcdFx0XHRmb3IodmFyIGk9MDsgaTxkb3RzLmxlbmd0aDsgaSsrKXtcclx0XHRcdFx0XHRcdChmdW5jdGlvbihkb3Qpe1xyXHRcdFx0XHRcdFx0XHRkb3QuY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKTtcclx0XHRcdFx0XHRcdFx0ZG90LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKDBkZWcpXCI7XHJcdFx0XHRcdFx0XHR9KShkb3RzW2ldKTtcclx0XHRcdFx0XHR9XHJcdFx0XHRcdH1cclx0XHRcdH0sXHJcdFx0XHRhZGp1c3RTaXplIDogZnVuY3Rpb24oKXtcclx0XHRcdFx0dmFyIHNpemUgPSBNYXRoLm1pbihQcm9maWxlQm9vay5jb25maWcubG9nby5zaXplLCBNYXRoLnJvdW5kKHdpbmRvdy5pbm5lcldpZHRoICogMC44KSk7XHJcdFx0XHRcdHZhciBzY2FsZSA9IE1hdGgucm91bmQoMTAwICogc2l6ZSAvIFByb2ZpbGVCb29rLmNvbmZpZy5sb2dvLnNpemUpIC8gMTAwO1xyXHRcdFx0XHR0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZShcIiArIHNjYWxlICsgXCIpXCI7XHJcdFx0XHR9XHJcdFx0fTtcclx0XHR0YXNrcy5yZW1vdmVEZWxpbWl0ZXIoKTtcclx0XHR0YXNrcy5jYWxjUG9zaXRpb24oKTtcclx0XHR0YXNrcy5kZXBsb3koKTtcclx0XHR0YXNrcy5hZGp1c3RTaXplKCk7XHJcdFx0d2luZG93LlByb2ZpbGVCb29rLm9uLm1lbnVBY3RpdmUgPSB0YXNrcy5vbkFjdGl2ZTtcclx0XHRcclx0XHRQcm9maWxlQm9vay5vbi5yZXNpemUgPSBQcm9maWxlQm9vay5vbi5yZXNpemUgfHwgbmV3IEFycmF5KCk7XHJcdFx0UHJvZmlsZUJvb2sub24ucmVzaXplLnB1c2godGFza3MuYWRqdXN0U2l6ZSk7XHJcdH07XHJ9KSgpO1xyXHJcclxyXHIiLCJ3aW5kb3cuUHJvZmlsZUJvb2sgPSB3aW5kb3cuUHJvZmlsZUJvb2sgfHwge307XHJ3aW5kb3cuUHJvZmlsZUJvb2sub24gPSB3aW5kb3cuUHJvZmlsZUJvb2sub24gfHwge307XHJccihmdW5jdGlvbigpe1xyXHR3aW5kb3cuUHJvZmlsZUJvb2suc2V0dXBNZW51ID0gZnVuY3Rpb24odGFyZ2V0KXtcclx0XHR2YXIgaXNMb2NrZWQgPSBmYWxzZTtcclx0XHR2YXIgaXNBY3RpdmUgPSBmYWxzZTtcclx0XHRcclx0XHR2YXIgdGFza3MgPSB7XHJcdFx0XHRhY3RpdmF0ZSA6IGZ1bmN0aW9uKGZsYWcpe1xyXHRcdFx0XHRpZih0eXBlb2YgUHJvZmlsZUJvb2sub24ubWVudUFjdGl2ZSA9PSBcImZ1bmN0aW9uXCIpe1xyXHRcdFx0XHRcdFByb2ZpbGVCb29rLm9uLm1lbnVBY3RpdmUoZmxhZyk7XHJcdFx0XHRcdH1cclx0XHRcdFx0KHRhcmdldC5jbGFzc0xpc3RbZmxhZyA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXSkoUHJvZmlsZUJvb2suY29uZmlnLm1lbnUuYWN0aXZlQ2xhc3NOYW1lKTtcclx0XHRcdFx0aXNBY3RpdmUgPSBmbGFnO1xyXHRcdFx0fSxcclx0XHRcdGFkanVzdFNpemUgOiBmdW5jdGlvbigpe1xyXHRcdFx0XHR2YXIgbWVudVNpemUgPSBQcm9maWxlQm9vay5jb25maWcubWVudS5zaXplKClcclx0XHRcdFx0dmFyIHNpemUgPSBNYXRoLm1pbihtZW51U2l6ZSwgTWF0aC5yb3VuZCh3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjcpLCBNYXRoLnJvdW5kKHdpbmRvdy5pbm5lcldpZHRoICogMC43NSkpO1xyXHRcdFx0XHR2YXIgc2NhbGUgPSBNYXRoLnJvdW5kKDEwMCAqIHNpemUgLyBtZW51U2l6ZSkgLyAxMDA7XHJcdFx0XHRcdHRhcmdldC5wYXJlbnROb2RlLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiO1xyXHRcdFx0fVxyXHRcdH07XHJcdFx0XHJcdFx0dmFyIGFuY2hvcnMgPSB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChcIkFcIik7XHJcdFx0Zm9yKHZhciBpPTA7IGk8YW5jaG9ycy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRhbmNob3JzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCl7XHJcdFx0XHRcdGlzTG9ja2VkID0gdHJ1ZTtcclx0XHRcdH0sIGZhbHNlKTtcclx0XHR9XHJcdFxyXHRcdHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKGV2ZW50KXtcclx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXHRcdFx0aXNMb2NrZWQgPSBmYWxzZTtcclx0XHRcdHRhc2tzLmFjdGl2YXRlKHRydWUpO1xyXHRcdH0sIGZhbHNlKTtcclx0XHR0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpe1xyXHRcdFx0aWYoIWlzQWN0aXZlKXtcclx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclx0XHRcdH1cclx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXHRcdFx0aXNMb2NrZWQgPSBmYWxzZTtcclx0XHRcdHRhc2tzLmFjdGl2YXRlKHRydWUpO1xyXHRcdH0sIGZhbHNlKTtcclx0XHRcclx0XHR0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKGV2ZW50KXtcclx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXHRcdFx0aWYoIWlzTG9ja2VkKXtcclx0XHRcdFx0dGFza3MuYWN0aXZhdGUoZmFsc2UpO1xyXHRcdFx0fVxyXHRcdH0sIGZhbHNlKTtcclx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbihldmVudCl7XHJcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclx0XHRcdHRhc2tzLmFjdGl2YXRlKGZhbHNlKTtcclx0XHR9LCBmYWxzZSk7XHJcdFx0XHJcdFx0XHJcdFx0dGFza3MuYWRqdXN0U2l6ZSgpO1xyXHRcdFByb2ZpbGVCb29rLm9uLnJlc2l6ZSA9IFByb2ZpbGVCb29rLm9uLnJlc2l6ZSB8fCBuZXcgQXJyYXkoKTtcclx0XHRQcm9maWxlQm9vay5vbi5yZXNpemUucHVzaCh0YXNrcy5hZGp1c3RTaXplKTtcclx0fTtccn0pKCk7XHJcclxyXHJcciIsIndpbmRvdy5Qcm9maWxlQm9vayA9IHdpbmRvdy5Qcm9maWxlQm9vayB8fCB7fTtccndpbmRvdy5Qcm9maWxlQm9vay5vbiA9IHdpbmRvdy5Qcm9maWxlQm9vay5vbiB8fCB7fTtcclxyKGZ1bmN0aW9uKCl7XHJcdHZhciBoZWFkUGFuZWwsIGFjdGl2ZVBhbmVsLGxpbmsydG9wO1xyXHR2YXIgdGFza3MgPSB7XHJcdFx0aW5pdCA6IGZ1bmN0aW9uKCl7XHJcdFx0XHRsaW5rMnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGluazJ0b3BcIik7XHJcdFx0XHRhY3RpdmVQYW5lbCA9IGhlYWRQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUHJvZmlsZUJvb2suY29uZmlnLmhlYWRQYW5lbC5xdWVyeSk7XHJcdFx0XHR0YXNrcy50cmFuc2l0aW9uKCk7XHJcdFx0fSxcclx0XHR0cmFuc2l0aW9uIDogZnVuY3Rpb24oKXtcclx0XHRcdHZhciBoYXNoID0gKCEhd2luZG93LmxvY2F0aW9uLmhhc2ggJiYgISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSkgPyB3aW5kb3cubG9jYXRpb24uaGFzaCA6IFwiXCI7XHJcdFx0XHR2YXIgaXNIZWFkID0gIXdpbmRvdy5sb2NhdGlvbi5oYXNoIHx8IHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9IGhhc2g7XHJcdFx0XHRcclx0XHRcdGlmKGlzSGVhZCl7XHJcdFx0XHRcdGhpc3RvcnkucmVwbGFjZVN0YXRlKFwicm9vdFwiLCBudWxsLCBsb2NhdGlvbi5wYXRobmFtZSk7XHJcdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImlzLXBhZ2VkXCIpO1xyXHRcdFx0XHRoZWFkUGFuZWwuY2xhc3NMaXN0LmFkZChcImlzLXNob3duXCIpO1xyXHRcdFx0XHRoZWFkUGFuZWwuY2xhc3NMaXN0LmFkZChcImlzLWN1cnJlbnRcIik7XHJcdFx0XHRcdGxpbmsydG9wLmNsYXNzTGlzdC5hZGQoXCJpcy1oaWRkZW5cIik7XHJcdFx0XHR9XHJcdFx0XHRlbHNle1xyXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpcy1wYWdlZFwiKTtcclx0XHRcdFx0aGVhZFBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93blwiKTtcclx0XHRcdFx0aGVhZFBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1jdXJyZW50XCIpO1xyXHRcdFx0XHRsaW5rMnRvcC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtaGlkZGVuXCIpO1xyXHRcdFx0fVxyXHRcdFx0XHJcdFx0XHRpZighIWhhc2ggJiYgYWN0aXZlUGFuZWwuaWQgIT0gXCJoZWFkX3BhbmVsXCIgJiYgIWlzSGVhZCl7XHJcdFx0XHRcdHZhciBwcmV2ID0gYWN0aXZlUGFuZWw7XHJcdFx0XHRcdHZhciBuZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoYXNoKTtcclx0XHRcdFx0XHJcdFx0XHRcdG5leHQuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XHJcdFx0XHRcdHByZXYuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKC0xODBkZWcpXCI7XHJcdFx0XHRcdHByZXYuY2xhc3NMaXN0LnJlbW92ZShcImlzLWN1cnJlbnRcIik7XHJcdFx0XHRcdG5leHQuY2xhc3NMaXN0LmFkZChcImlzLWN1cnJlbnRcIik7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsID0gbmV4dDtcclx0XHRcdFx0XHJcdFx0XHRcdHJldHVybjtcclx0XHRcdH1cclx0XHRcdFxyXHRcdFx0dmFyIHJlc2V0U2Nyb2xsUGFuZWwgPSBmdW5jdGlvbihwYW5lbHMsIGlzU2Nyb2xsYWJsZSl7XHJcdFx0XHRcdGZvcih2YXIgaT0wOyBpPHBhbmVscy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRcdFx0KGZ1bmN0aW9uKHBhbmVsKXtcclx0XHRcdFx0XHRcdHZhciBzY3JvbGxQYW5lbCA9IHBhbmVsLnF1ZXJ5U2VsZWN0b3IoUHJvZmlsZUJvb2suY29uZmlnLnNjcm9sbFBhbmVsLnF1ZXJ5KTtcclx0XHRcdFx0XHRcdGlmKCEhc2Nyb2xsUGFuZWwpe1xyXHRcdFx0XHRcdFx0XHRzY3JvbGxQYW5lbC5zdHlsZS5vdmVyZmxvdyA9IGlzU2Nyb2xsYWJsZSA/IFwiYXV0b1wiIDogXCJoaWRkZW5cIjtcclx0XHRcdFx0XHRcdH1cclx0XHRcdFx0XHR9KShwYW5lbHNbaV0pO1xyXHRcdFx0XHR9XHJcdFx0XHR9O1xyXHRcdFx0XHJcdFx0XHRpZighIWhhc2ggJiYgaGVhZFBhbmVsID09PSBhY3RpdmVQYW5lbCl7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1jdXJyZW50XCIpO1xyXHRcdFx0XHRhY3RpdmVQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaGFzaCk7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsLmNsYXNzTGlzdC5hZGQoXCJpcy1jdXJyZW50XCIpO1xyXHRcdFx0XHRcclx0XHRcdFx0cmVzZXRTY3JvbGxQYW5lbChbYWN0aXZlUGFuZWwsIGhlYWRQYW5lbF0sIGZhbHNlKTtcclx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKHBhbmVsKXtcclx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKXtcclx0XHRcdFx0XHRcdHJlc2V0U2Nyb2xsUGFuZWwoW3BhbmVsXSwgdHJ1ZSk7XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHR9KShhY3RpdmVQYW5lbCksIFByb2ZpbGVCb29rLmNvbmZpZy5jb250ZW50UGFuZWwucm90YXRlRHVyYXRpb24pO1xyXHRcdFx0XHRcclx0XHRcdFx0YWN0aXZlUGFuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XHJcdFx0XHRcdGhlYWRQYW5lbC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZVkoMTgwZGVnKVwiO1xyXHRcdFx0XHJcdFx0XHRcdGhlYWRQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd25cIik7XHJcdFx0XHRcdHJldHVybjtcclx0XHRcdH1cclx0XHRcdGlmKCFoYXNoICYmIGhlYWRQYW5lbCAhPT0gYWN0aXZlUGFuZWwpe1xyXHRcdFx0XHRhY3RpdmVQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtY3VycmVudFwiKTtcclx0XHRcdFx0XHJcdFx0XHRcdHJlc2V0U2Nyb2xsUGFuZWwoW2FjdGl2ZVBhbmVsLCBoZWFkUGFuZWxdLCBmYWxzZSk7XHJcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbihwYW5lbCl7XHJcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCl7XHJcdFx0XHRcdFx0XHRyZXNldFNjcm9sbFBhbmVsKFtwYW5lbF0sIHRydWUpO1xyXHRcdFx0XHRcdH1cclx0XHRcdFx0fSkoYWN0aXZlUGFuZWwpLCBQcm9maWxlQm9vay5jb25maWcuY29udGVudFBhbmVsLnJvdGF0ZUR1cmF0aW9uKTtcclx0XHRcdFx0XHJcdFx0XHRcdGFjdGl2ZVBhbmVsLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWSgtMTgwZGVnKVwiO1xyXHRcdFx0XHRoZWFkUGFuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XHJcdFx0XHRcdGhlYWRQYW5lbC5jbGFzc0xpc3QuYWRkKFwiaXMtc2hvd25cIik7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsID0gaGVhZFBhbmVsO1xyXHRcdFx0XHRhY3RpdmVQYW5lbC5jbGFzc0xpc3QuYWRkKFwiaXMtY3VycmVudFwiKTtcclx0XHRcdFx0cmV0dXJuO1xyXHRcdFx0fVxyXHRcdH1cclx0fTtcclx0XHJcdFByb2ZpbGVCb29rLmluaXRQYWdlVHJhbnNpdGlvbiA9IHRhc2tzLmluaXQ7XHJcdFByb2ZpbGVCb29rLm9uLnBhZ2VUcmFuc2l0aW9uID0gdGFza3MudHJhbnNpdGlvbjtccn0pKCk7Iiwid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyXHJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpe1xyXHRQcm9maWxlQm9vay5pbml0UGFnZVRyYW5zaXRpb24oKTtcclx0UHJvZmlsZUJvb2sudXRpbC5xdWVyeUVhY2goXCIuYy10ZXh0dXJlX2xvZ29cIiwgUHJvZmlsZUJvb2suc2V0dXBMb2dvKTtcclx0UHJvZmlsZUJvb2sudXRpbC5xdWVyeUVhY2goXCIuYy1tYWluX21lbnVfX2ZyYW1lXCIsIFByb2ZpbGVCb29rLnNldHVwTWVudSk7XHJcdFByb2ZpbGVCb29rLnV0aWwucXVlcnlFYWNoKFwiLmMtY29udGVudF9wYW5lbF9fbWFpblwiLCBQcm9maWxlQm9vay51dGlsLm92ZXJmbG93U2Nyb2xsaW5nKTtcclx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIFByb2ZpbGVCb29rLm9uLnBhZ2VUcmFuc2l0aW9uKTtccn0sIGZhbHNlKTsiXX0=
