window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};window.ProfileBook.config = {	resizeWait : 333,	menu : {		activeClassName : "is-active",		size : 700	},	logo : {		size : 600,		dot : {			className : "u-text_dot"		}	},	headPanel : {		query : "#head_panel"	}};
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	window.ProfileBook.util = {		queryEach : function(query, func){			var elements = document.querySelectorAll(query);			for(var i=0; i<elements.length; i++){				(function(elm){					func(elm);				})(elements[i]);			}		}	};		var resizedTimer;	var resizedFunction = function(){		window.clearTimeout(resizedTimer);		resizedTimer = window.setTimeout(function(){			if(!!ProfileBook.on.resize && ProfileBook.on.resize.length > 0){				for(var i=0; i<ProfileBook.on.resize.length; i++){					if(typeof ProfileBook.on.resize[i] == "function"){						(ProfileBook.on.resize[i])();					}				}			}		}, ProfileBook.config.resizeWait)	};	ProfileBook.on.resize = ProfileBook.on.resize || new Array();	window.addEventListener("resize", resizedFunction, false);})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	var textsConfig = {		P : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 20, y : 40 },			{ x : 34, y : 43 },			{ x : 38, y : 54 },			{ x : 32, y : 64 },			{ x : 20, y : 66 }		],		O : [			{ x : 25, y : 39 },			{ x : 36, y : 42 },			{ x : 45, y : 50 },			{ x : 48, y : 62 },			{ x : 47, y : 74 },			{ x : 43, y : 85 },			{ x : 35, y : 92 },			{ x : 26, y : 94 },			{ x : 14, y : 42 },			{ x :  5, y : 50 },			{ x :  2, y : 62 },			{ x :  3, y : 74 },			{ x :  7, y : 85 },			{ x : 15, y : 92 }		],		R : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 19, y : 40 },			{ x : 30, y : 41 },			{ x : 38, y : 48 },			{ x : 39, y : 59 },			{ x : 32, y : 67 },			{ x : 19, y : 68 },			{ x : 29, y : 76 },			{ x : 35, y : 85 },			{ x : 41, y : 95 }		],		T : [			{ x :  0, y : 40 },			{ x : 13, y : 40 },			{ x : 26, y : 40 },			{ x : 39, y : 40 },			{ x : 19, y : 54 },			{ x : 19, y : 68 },			{ x : 19, y : 82 },			{ x : 19, y : 96 }		],		F : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 19, y : 40 },			{ x : 30, y : 40 },			{ x : 41, y : 40 },			{ x : 20, y : 67 },			{ x : 32, y : 67 }		],		L : [			{ x : 8, y : 40 },			{ x : 8, y : 54 },			{ x : 8, y : 68 },			{ x : 8, y : 82 },			{ x : 8, y : 96 },			{ x : 21, y : 96 },			{ x : 33, y : 96 }		],		I : [			{ x : 11, y : 40 },			{ x : 11, y : 54 },			{ x : 11, y : 68 },			{ x : 11, y : 82 },			{ x : 11, y : 96 }		]	}	window.ProfileBook.setupLogo = function(target){		var dots = new Array();		var textStatus = new Array();		var tasks = {			removeDelimiter : function(){				for(var i=target.childNodes.length - 1; i>=0; i--){					if(target.childNodes[i].nodeType == document.TEXT_NODE && target.childNodes[i].nodeValue.match(/^\s+$/)){						target.removeChild(target.childNodes[i]);					}				}			},			calcPosition : function(){				for(var i=0; i<target.childNodes.length; i++){					textStatus.push({						x : target.childNodes[i].offsetLeft,						y : target.childNodes[i].offsetTop,						text : target.childNodes[i].getAttribute("data-logo-text"),						elm : target.childNodes[i]					});				}			},			deploy : function(){				for(var i=0; i<textStatus.length; i++){					var dotCoords = textsConfig[textStatus[i].text];					for(var j=0; j<dotCoords.length; j++){						dots.push((function(status, coord){							var dot = document.createElement("div");							dot.className = ProfileBook.config.logo.dot.className;							dot.style.left = status.x + coord.x + "px";							dot.style.top  = status.y + coord.y + "px";							target.appendChild(dot);							return dot;						})(textStatus[i], dotCoords[j]));					}					target.removeChild(textStatus[i].elm);				}								var subtitleText = target.getAttribute("data-subtitle");				var subtitleElement = document.createElement("div");				subtitleElement.className = "c-texture_logo__subtitle";				for(var i=0; i<subtitleText.length; i++){					(function(char){						var textDot = document.createElement("span");						textDot.className = "u-sub_text";						textDot.appendChild(document.createTextNode(char));						dots.push(textDot);						subtitleElement.appendChild(textDot);					})(subtitleText[i]);				}				target.appendChild(subtitleElement);			},			onActive : function(flag){				if(flag){					var distance = Math.pow(Math.pow(window.innerWidth, 2) + Math.pow(window.innerHeight, 2), 1/2);					for(var i=0; i<dots.length; i++){						(function(dot){							var angle = 2 * Math.PI * Math.random();							var centerX = Math.round(distance * Math.cos(angle));							var centerY = Math.round(distance * Math.sin(angle));							dot.classList.add("is-active");							dot.style.transformOrigin = centerX + "px " + centerY + "px";							dot.style.transform = "rotate(45deg)";						})(dots[i]);					}				}				else{					for(var i=0; i<dots.length; i++){						(function(dot){							dot.classList.remove("is-active");							dot.style.transform = "rotate(0deg)";						})(dots[i]);					}				}			},			adjustSize : function(){				var size = Math.min(ProfileBook.config.logo.size, Math.round(window.innerWidth * 0.8));				var scale = Math.round(100 * size / ProfileBook.config.logo.size) / 100;				target.style.transform = "scale(" + scale + ")";			}		};		tasks.removeDelimiter();		tasks.calcPosition();		tasks.deploy();		tasks.adjustSize();		window.ProfileBook.on.menuActive = tasks.onActive;				ProfileBook.on.resize = ProfileBook.on.resize || new Array();		ProfileBook.on.resize.push(tasks.adjustSize);	};})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	window.ProfileBook.setupMenu = function(target){		var isLocked = false;		var isActive = false;				var tasks = {			activate : function(flag){				if(typeof ProfileBook.on.menuActive == "function"){					ProfileBook.on.menuActive(flag);				}				(target.classList[flag ? "add" : "remove"])(ProfileBook.config.menu.activeClassName);				isActive = flag;			},			adjustSize : function(){				var size = Math.min(ProfileBook.config.menu.size, Math.round(window.innerHeight * 0.7), Math.round(window.innerWidth * 0.8));				var scale = Math.round(100 * size / ProfileBook.config.menu.size) / 100;				target.parentNode.style.transform = "scale(" + scale + ")";			}		};				var anchors = target.querySelectorAll("A");		for(var i=0; i<anchors.length; i++){			anchors[i].addEventListener("click", function(event){				isLocked = true;			}, false);		}			target.addEventListener("mouseover", function(event){			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);		target.addEventListener("touchstart", function(event){			if(!isActive){				event.preventDefault();			}			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);				target.addEventListener("mouseout", function(event){			event.stopPropagation();			if(!isLocked){				tasks.activate(false);			}		}, false);		document.addEventListener("touchstart", function(event){			event.stopPropagation();			tasks.activate(false);		}, false);						tasks.adjustSize();		ProfileBook.on.resize = ProfileBook.on.resize || new Array();		ProfileBook.on.resize.push(tasks.adjustSize);	};})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	var headPanel, activePanel;	var tasks = {		init : function(){			activePanel = headPanel = document.querySelector(ProfileBook.config.headPanel.query);			tasks.transition();		},		transition : function(){			var hash = (!!window.location.hash && !!document.querySelector(window.location.hash)) ? window.location.hash : "";			var isHead = !window.location.hash || window.location.hash != hash;						if(isHead){				history.replaceState("root", null, location.pathname);				document.body.classList.remove("is-paged");			}			else{				document.body.classList.add("is-paged");			}						if(!!hash && headPanel === activePanel){				activePanel = document.querySelector(hash);				activePanel.style.transform = "rotateY(0deg)";				headPanel.style.transform = "rotateY(180deg)";			}			if(!hash && headPanel !== activePanel){				activePanel.style.transform = "rotateY(-180deg)";				headPanel.style.transform = "rotateY(0deg)";				activePanel = headPanel;			}		}	};	ProfileBook.initPageTransition = tasks.init;	ProfileBook.on.pageTransition = tasks.transition;})();
window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};document.addEventListener("DOMContentLoaded", function(){	ProfileBook.initPageTransition();	ProfileBook.util.queryEach(".c-texture_logo", ProfileBook.setupLogo);	ProfileBook.util.queryEach(".c-main_menu__frame", ProfileBook.setupMenu);	window.addEventListener("hashchange", ProfileBook.on.pageTransition);}, false);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb25maWcuanMiLCJfdXRpbGl0eS5qcyIsIl9sb2dvX3RleHR1cmUuanMiLCJfbWVudV9wYW5lbC5qcyIsIl9wYWdlX3RyYW5zaXRpb24uanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUNBQTtBQ0FBO0FDQUE7QUNBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLmNvbmZpZyA9IHtcclx0cmVzaXplV2FpdCA6IDMzMyxcclx0bWVudSA6IHtcclx0XHRhY3RpdmVDbGFzc05hbWUgOiBcImlzLWFjdGl2ZVwiLFxyXHRcdHNpemUgOiA3MDBcclx0fSxcclx0bG9nbyA6IHtcclx0XHRzaXplIDogNjAwLFxyXHRcdGRvdCA6IHtcclx0XHRcdGNsYXNzTmFtZSA6IFwidS10ZXh0X2RvdFwiXHJcdFx0fVxyXHR9LFxyXHRoZWFkUGFuZWwgOiB7XHJcdFx0cXVlcnkgOiBcIiNoZWFkX3BhbmVsXCJcclx0fVxyfTtcclxyIiwid2luZG93LlByb2ZpbGVCb29rID0gd2luZG93LlByb2ZpbGVCb29rIHx8IHt9O1xyd2luZG93LlByb2ZpbGVCb29rLm9uID0gd2luZG93LlByb2ZpbGVCb29rLm9uIHx8IHt9O1xyXHIoZnVuY3Rpb24oKXtcclx0d2luZG93LlByb2ZpbGVCb29rLnV0aWwgPSB7XHJcdFx0cXVlcnlFYWNoIDogZnVuY3Rpb24ocXVlcnksIGZ1bmMpe1xyXHRcdFx0dmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSk7XHJcdFx0XHRmb3IodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRcdChmdW5jdGlvbihlbG0pe1xyXHRcdFx0XHRcdGZ1bmMoZWxtKTtcclx0XHRcdFx0fSkoZWxlbWVudHNbaV0pO1xyXHRcdFx0fVxyXHRcdH1cclx0fTtcclx0XHJcdHZhciByZXNpemVkVGltZXI7XHJcdHZhciByZXNpemVkRnVuY3Rpb24gPSBmdW5jdGlvbigpe1xyXHRcdHdpbmRvdy5jbGVhclRpbWVvdXQocmVzaXplZFRpbWVyKTtcclx0XHRyZXNpemVkVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXHRcdFx0aWYoISFQcm9maWxlQm9vay5vbi5yZXNpemUgJiYgUHJvZmlsZUJvb2sub24ucmVzaXplLmxlbmd0aCA+IDApe1xyXHRcdFx0XHRmb3IodmFyIGk9MDsgaTxQcm9maWxlQm9vay5vbi5yZXNpemUubGVuZ3RoOyBpKyspe1xyXHRcdFx0XHRcdGlmKHR5cGVvZiBQcm9maWxlQm9vay5vbi5yZXNpemVbaV0gPT0gXCJmdW5jdGlvblwiKXtcclx0XHRcdFx0XHRcdChQcm9maWxlQm9vay5vbi5yZXNpemVbaV0pKCk7XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHR9XHJcdFx0XHR9XHJcdFx0fSwgUHJvZmlsZUJvb2suY29uZmlnLnJlc2l6ZVdhaXQpXHJcdH07XHJcdFByb2ZpbGVCb29rLm9uLnJlc2l6ZSA9IFByb2ZpbGVCb29rLm9uLnJlc2l6ZSB8fCBuZXcgQXJyYXkoKTtcclx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplZEZ1bmN0aW9uLCBmYWxzZSk7XHJ9KSgpO1xyXHJcclxyXHIiLCJ3aW5kb3cuUHJvZmlsZUJvb2sgPSB3aW5kb3cuUHJvZmlsZUJvb2sgfHwge307XHJ3aW5kb3cuUHJvZmlsZUJvb2sub24gPSB3aW5kb3cuUHJvZmlsZUJvb2sub24gfHwge307XHJccihmdW5jdGlvbigpe1xyXHR2YXIgdGV4dHNDb25maWcgPSB7XHJcdFx0UCA6IFtcclx0XHRcdHsgeCA6IDgsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDU0IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogNjggfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA4MiB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDk2IH0sXHJcdFx0XHR7IHggOiAyMCwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiAzNCwgeSA6IDQzIH0sXHJcdFx0XHR7IHggOiAzOCwgeSA6IDU0IH0sXHJcdFx0XHR7IHggOiAzMiwgeSA6IDY0IH0sXHJcdFx0XHR7IHggOiAyMCwgeSA6IDY2IH1cclx0XHRdLFxyXHRcdE8gOiBbXHJcdFx0XHR7IHggOiAyNSwgeSA6IDM5IH0sXHJcdFx0XHR7IHggOiAzNiwgeSA6IDQyIH0sXHJcdFx0XHR7IHggOiA0NSwgeSA6IDUwIH0sXHJcdFx0XHR7IHggOiA0OCwgeSA6IDYyIH0sXHJcdFx0XHR7IHggOiA0NywgeSA6IDc0IH0sXHJcdFx0XHR7IHggOiA0MywgeSA6IDg1IH0sXHJcdFx0XHR7IHggOiAzNSwgeSA6IDkyIH0sXHJcdFx0XHR7IHggOiAyNiwgeSA6IDk0IH0sXHJcdFx0XHR7IHggOiAxNCwgeSA6IDQyIH0sXHJcdFx0XHR7IHggOiAgNSwgeSA6IDUwIH0sXHJcdFx0XHR7IHggOiAgMiwgeSA6IDYyIH0sXHJcdFx0XHR7IHggOiAgMywgeSA6IDc0IH0sXHJcdFx0XHR7IHggOiAgNywgeSA6IDg1IH0sXHJcdFx0XHR7IHggOiAxNSwgeSA6IDkyIH1cclx0XHRdLFxyXHRcdFIgOiBbXHJcdFx0XHR7IHggOiA4LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDY4IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogODIgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA5NiB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMzAsIHkgOiA0MSB9LFxyXHRcdFx0eyB4IDogMzgsIHkgOiA0OCB9LFxyXHRcdFx0eyB4IDogMzksIHkgOiA1OSB9LFxyXHRcdFx0eyB4IDogMzIsIHkgOiA2NyB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA2OCB9LFxyXHRcdFx0eyB4IDogMjksIHkgOiA3NiB9LFxyXHRcdFx0eyB4IDogMzUsIHkgOiA4NSB9LFxyXHRcdFx0eyB4IDogNDEsIHkgOiA5NSB9XHJcdFx0XSxcclx0XHRUIDogW1xyXHRcdFx0eyB4IDogIDAsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMTMsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMjYsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMzksIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA1NCB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA2OCB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA4MiB9LFxyXHRcdFx0eyB4IDogMTksIHkgOiA5NiB9XHJcdFx0XSxcclx0XHRGIDogW1xyXHRcdFx0eyB4IDogOCwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiA4LCB5IDogNTQgfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA2OCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDgyIH0sXHJcdFx0XHR7IHggOiA4LCB5IDogOTYgfSxcclx0XHRcdHsgeCA6IDE5LCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDMwLCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDQxLCB5IDogNDAgfSxcclx0XHRcdHsgeCA6IDIwLCB5IDogNjcgfSxcclx0XHRcdHsgeCA6IDMyLCB5IDogNjcgfVxyXHRcdF0sXHJcdFx0TCA6IFtcclx0XHRcdHsgeCA6IDgsIHkgOiA0MCB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDU0IH0sXHJcdFx0XHR7IHggOiA4LCB5IDogNjggfSxcclx0XHRcdHsgeCA6IDgsIHkgOiA4MiB9LFxyXHRcdFx0eyB4IDogOCwgeSA6IDk2IH0sXHJcdFx0XHR7IHggOiAyMSwgeSA6IDk2IH0sXHJcdFx0XHR7IHggOiAzMywgeSA6IDk2IH1cclx0XHRdLFxyXHRcdEkgOiBbXHJcdFx0XHR7IHggOiAxMSwgeSA6IDQwIH0sXHJcdFx0XHR7IHggOiAxMSwgeSA6IDU0IH0sXHJcdFx0XHR7IHggOiAxMSwgeSA6IDY4IH0sXHJcdFx0XHR7IHggOiAxMSwgeSA6IDgyIH0sXHJcdFx0XHR7IHggOiAxMSwgeSA6IDk2IH1cclx0XHRdXHJcdH1cclxyXHR3aW5kb3cuUHJvZmlsZUJvb2suc2V0dXBMb2dvID0gZnVuY3Rpb24odGFyZ2V0KXtcclx0XHR2YXIgZG90cyA9IG5ldyBBcnJheSgpO1xyXHRcdHZhciB0ZXh0U3RhdHVzID0gbmV3IEFycmF5KCk7XHJcdFx0dmFyIHRhc2tzID0ge1xyXHRcdFx0cmVtb3ZlRGVsaW1pdGVyIDogZnVuY3Rpb24oKXtcclx0XHRcdFx0Zm9yKHZhciBpPXRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGk+PTA7IGktLSl7XHJcdFx0XHRcdFx0aWYodGFyZ2V0LmNoaWxkTm9kZXNbaV0ubm9kZVR5cGUgPT0gZG9jdW1lbnQuVEVYVF9OT0RFICYmIHRhcmdldC5jaGlsZE5vZGVzW2ldLm5vZGVWYWx1ZS5tYXRjaCgvXlxccyskLykpe1xyXHRcdFx0XHRcdFx0dGFyZ2V0LnJlbW92ZUNoaWxkKHRhcmdldC5jaGlsZE5vZGVzW2ldKTtcclx0XHRcdFx0XHR9XHJcdFx0XHRcdH1cclx0XHRcdH0sXHJcdFx0XHRjYWxjUG9zaXRpb24gOiBmdW5jdGlvbigpe1xyXHRcdFx0XHRmb3IodmFyIGk9MDsgaTx0YXJnZXQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKyl7XHJcdFx0XHRcdFx0dGV4dFN0YXR1cy5wdXNoKHtcclx0XHRcdFx0XHRcdHggOiB0YXJnZXQuY2hpbGROb2Rlc1tpXS5vZmZzZXRMZWZ0LFxyXHRcdFx0XHRcdFx0eSA6IHRhcmdldC5jaGlsZE5vZGVzW2ldLm9mZnNldFRvcCxcclx0XHRcdFx0XHRcdHRleHQgOiB0YXJnZXQuY2hpbGROb2Rlc1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxvZ28tdGV4dFwiKSxcclx0XHRcdFx0XHRcdGVsbSA6IHRhcmdldC5jaGlsZE5vZGVzW2ldXHJcdFx0XHRcdFx0fSk7XHJcdFx0XHRcdH1cclx0XHRcdH0sXHJcdFx0XHRkZXBsb3kgOiBmdW5jdGlvbigpe1xyXHRcdFx0XHRmb3IodmFyIGk9MDsgaTx0ZXh0U3RhdHVzLmxlbmd0aDsgaSsrKXtcclx0XHRcdFx0XHR2YXIgZG90Q29vcmRzID0gdGV4dHNDb25maWdbdGV4dFN0YXR1c1tpXS50ZXh0XTtcclx0XHRcdFx0XHRmb3IodmFyIGo9MDsgajxkb3RDb29yZHMubGVuZ3RoOyBqKyspe1xyXHRcdFx0XHRcdFx0ZG90cy5wdXNoKChmdW5jdGlvbihzdGF0dXMsIGNvb3JkKXtcclx0XHRcdFx0XHRcdFx0dmFyIGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcdFx0XHRcdFx0XHRcdGRvdC5jbGFzc05hbWUgPSBQcm9maWxlQm9vay5jb25maWcubG9nby5kb3QuY2xhc3NOYW1lO1xyXHRcdFx0XHRcdFx0XHRkb3Quc3R5bGUubGVmdCA9IHN0YXR1cy54ICsgY29vcmQueCArIFwicHhcIjtcclx0XHRcdFx0XHRcdFx0ZG90LnN0eWxlLnRvcCAgPSBzdGF0dXMueSArIGNvb3JkLnkgKyBcInB4XCI7XHJcdFx0XHRcdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChkb3QpO1xyXHRcdFx0XHRcdFx0XHRyZXR1cm4gZG90O1xyXHRcdFx0XHRcdFx0fSkodGV4dFN0YXR1c1tpXSwgZG90Q29vcmRzW2pdKSk7XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHRcdHRhcmdldC5yZW1vdmVDaGlsZCh0ZXh0U3RhdHVzW2ldLmVsbSk7XHJcdFx0XHRcdH1cclx0XHRcdFx0XHJcdFx0XHRcdHZhciBzdWJ0aXRsZVRleHQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdWJ0aXRsZVwiKTtcclx0XHRcdFx0dmFyIHN1YnRpdGxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcdFx0XHRcdHN1YnRpdGxlRWxlbWVudC5jbGFzc05hbWUgPSBcImMtdGV4dHVyZV9sb2dvX19zdWJ0aXRsZVwiO1xyXHRcdFx0XHRmb3IodmFyIGk9MDsgaTxzdWJ0aXRsZVRleHQubGVuZ3RoOyBpKyspe1xyXHRcdFx0XHRcdChmdW5jdGlvbihjaGFyKXtcclx0XHRcdFx0XHRcdHZhciB0ZXh0RG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcdFx0XHRcdFx0XHR0ZXh0RG90LmNsYXNzTmFtZSA9IFwidS1zdWJfdGV4dFwiO1xyXHRcdFx0XHRcdFx0dGV4dERvdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGFyKSk7XHJcdFx0XHRcdFx0XHRkb3RzLnB1c2godGV4dERvdCk7XHJcdFx0XHRcdFx0XHRzdWJ0aXRsZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGV4dERvdCk7XHJcdFx0XHRcdFx0fSkoc3VidGl0bGVUZXh0W2ldKTtcclx0XHRcdFx0fVxyXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3VidGl0bGVFbGVtZW50KTtcclx0XHRcdH0sXHJcdFx0XHRvbkFjdGl2ZSA6IGZ1bmN0aW9uKGZsYWcpe1xyXHRcdFx0XHRpZihmbGFnKXtcclx0XHRcdFx0XHR2YXIgZGlzdGFuY2UgPSBNYXRoLnBvdyhNYXRoLnBvdyh3aW5kb3cuaW5uZXJXaWR0aCwgMikgKyBNYXRoLnBvdyh3aW5kb3cuaW5uZXJIZWlnaHQsIDIpLCAxLzIpO1xyXHRcdFx0XHRcdGZvcih2YXIgaT0wOyBpPGRvdHMubGVuZ3RoOyBpKyspe1xyXHRcdFx0XHRcdFx0KGZ1bmN0aW9uKGRvdCl7XHJcdFx0XHRcdFx0XHRcdHZhciBhbmdsZSA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclx0XHRcdFx0XHRcdFx0dmFyIGNlbnRlclggPSBNYXRoLnJvdW5kKGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpKTtcclx0XHRcdFx0XHRcdFx0dmFyIGNlbnRlclkgPSBNYXRoLnJvdW5kKGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpKTtcclx0XHRcdFx0XHRcdFx0ZG90LmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIik7XHJcdFx0XHRcdFx0XHRcdGRvdC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSBjZW50ZXJYICsgXCJweCBcIiArIGNlbnRlclkgKyBcInB4XCI7XHJcdFx0XHRcdFx0XHRcdGRvdC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSg0NWRlZylcIjtcclx0XHRcdFx0XHRcdH0pKGRvdHNbaV0pO1xyXHRcdFx0XHRcdH1cclx0XHRcdFx0fVxyXHRcdFx0XHRlbHNle1xyXHRcdFx0XHRcdGZvcih2YXIgaT0wOyBpPGRvdHMubGVuZ3RoOyBpKyspe1xyXHRcdFx0XHRcdFx0KGZ1bmN0aW9uKGRvdCl7XHJcdFx0XHRcdFx0XHRcdGRvdC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtYWN0aXZlXCIpO1xyXHRcdFx0XHRcdFx0XHRkb3Quc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoMGRlZylcIjtcclx0XHRcdFx0XHRcdH0pKGRvdHNbaV0pO1xyXHRcdFx0XHRcdH1cclx0XHRcdFx0fVxyXHRcdFx0fSxcclx0XHRcdGFkanVzdFNpemUgOiBmdW5jdGlvbigpe1xyXHRcdFx0XHR2YXIgc2l6ZSA9IE1hdGgubWluKFByb2ZpbGVCb29rLmNvbmZpZy5sb2dvLnNpemUsIE1hdGgucm91bmQod2luZG93LmlubmVyV2lkdGggKiAwLjgpKTtcclx0XHRcdFx0dmFyIHNjYWxlID0gTWF0aC5yb3VuZCgxMDAgKiBzaXplIC8gUHJvZmlsZUJvb2suY29uZmlnLmxvZ28uc2l6ZSkgLyAxMDA7XHJcdFx0XHRcdHRhcmdldC5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGUgKyBcIilcIjtcclx0XHRcdH1cclx0XHR9O1xyXHRcdHRhc2tzLnJlbW92ZURlbGltaXRlcigpO1xyXHRcdHRhc2tzLmNhbGNQb3NpdGlvbigpO1xyXHRcdHRhc2tzLmRlcGxveSgpO1xyXHRcdHRhc2tzLmFkanVzdFNpemUoKTtcclx0XHR3aW5kb3cuUHJvZmlsZUJvb2sub24ubWVudUFjdGl2ZSA9IHRhc2tzLm9uQWN0aXZlO1xyXHRcdFxyXHRcdFByb2ZpbGVCb29rLm9uLnJlc2l6ZSA9IFByb2ZpbGVCb29rLm9uLnJlc2l6ZSB8fCBuZXcgQXJyYXkoKTtcclx0XHRQcm9maWxlQm9vay5vbi5yZXNpemUucHVzaCh0YXNrcy5hZGp1c3RTaXplKTtcclx0fTtccn0pKCk7XHJcclxyXHJcciIsIndpbmRvdy5Qcm9maWxlQm9vayA9IHdpbmRvdy5Qcm9maWxlQm9vayB8fCB7fTtccndpbmRvdy5Qcm9maWxlQm9vay5vbiA9IHdpbmRvdy5Qcm9maWxlQm9vay5vbiB8fCB7fTtcclxyKGZ1bmN0aW9uKCl7XHJcdHdpbmRvdy5Qcm9maWxlQm9vay5zZXR1cE1lbnUgPSBmdW5jdGlvbih0YXJnZXQpe1xyXHRcdHZhciBpc0xvY2tlZCA9IGZhbHNlO1xyXHRcdHZhciBpc0FjdGl2ZSA9IGZhbHNlO1xyXHRcdFxyXHRcdHZhciB0YXNrcyA9IHtcclx0XHRcdGFjdGl2YXRlIDogZnVuY3Rpb24oZmxhZyl7XHJcdFx0XHRcdGlmKHR5cGVvZiBQcm9maWxlQm9vay5vbi5tZW51QWN0aXZlID09IFwiZnVuY3Rpb25cIil7XHJcdFx0XHRcdFx0UHJvZmlsZUJvb2sub24ubWVudUFjdGl2ZShmbGFnKTtcclx0XHRcdFx0fVxyXHRcdFx0XHQodGFyZ2V0LmNsYXNzTGlzdFtmbGFnID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKShQcm9maWxlQm9vay5jb25maWcubWVudS5hY3RpdmVDbGFzc05hbWUpO1xyXHRcdFx0XHRpc0FjdGl2ZSA9IGZsYWc7XHJcdFx0XHR9LFxyXHRcdFx0YWRqdXN0U2l6ZSA6IGZ1bmN0aW9uKCl7XHJcdFx0XHRcdHZhciBzaXplID0gTWF0aC5taW4oUHJvZmlsZUJvb2suY29uZmlnLm1lbnUuc2l6ZSwgTWF0aC5yb3VuZCh3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjcpLCBNYXRoLnJvdW5kKHdpbmRvdy5pbm5lcldpZHRoICogMC44KSk7XHJcdFx0XHRcdHZhciBzY2FsZSA9IE1hdGgucm91bmQoMTAwICogc2l6ZSAvIFByb2ZpbGVCb29rLmNvbmZpZy5tZW51LnNpemUpIC8gMTAwO1xyXHRcdFx0XHR0YXJnZXQucGFyZW50Tm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgc2NhbGUgKyBcIilcIjtcclx0XHRcdH1cclx0XHR9O1xyXHRcdFxyXHRcdHZhciBhbmNob3JzID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJBXCIpO1xyXHRcdGZvcih2YXIgaT0wOyBpPGFuY2hvcnMubGVuZ3RoOyBpKyspe1xyXHRcdFx0YW5jaG9yc1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpe1xyXHRcdFx0XHRpc0xvY2tlZCA9IHRydWU7XHJcdFx0XHR9LCBmYWxzZSk7XHJcdFx0fVxyXHRcclx0XHR0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihldmVudCl7XHJcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclx0XHRcdGlzTG9ja2VkID0gZmFsc2U7XHJcdFx0XHR0YXNrcy5hY3RpdmF0ZSh0cnVlKTtcclx0XHR9LCBmYWxzZSk7XHJcdFx0dGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50KXtcclx0XHRcdGlmKCFpc0FjdGl2ZSl7XHJcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcdFx0XHR9XHJcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclx0XHRcdGlzTG9ja2VkID0gZmFsc2U7XHJcdFx0XHR0YXNrcy5hY3RpdmF0ZSh0cnVlKTtcclx0XHR9LCBmYWxzZSk7XHJcdFx0XHJcdFx0dGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbihldmVudCl7XHJcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclx0XHRcdGlmKCFpc0xvY2tlZCl7XHJcdFx0XHRcdHRhc2tzLmFjdGl2YXRlKGZhbHNlKTtcclx0XHRcdH1cclx0XHR9LCBmYWxzZSk7XHJcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpe1xyXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcdFx0XHR0YXNrcy5hY3RpdmF0ZShmYWxzZSk7XHJcdFx0fSwgZmFsc2UpO1xyXHRcdFxyXHRcdFxyXHRcdHRhc2tzLmFkanVzdFNpemUoKTtcclx0XHRQcm9maWxlQm9vay5vbi5yZXNpemUgPSBQcm9maWxlQm9vay5vbi5yZXNpemUgfHwgbmV3IEFycmF5KCk7XHJcdFx0UHJvZmlsZUJvb2sub24ucmVzaXplLnB1c2godGFza3MuYWRqdXN0U2l6ZSk7XHJcdH07XHJ9KSgpO1xyXHJcclxyXHIiLCJ3aW5kb3cuUHJvZmlsZUJvb2sgPSB3aW5kb3cuUHJvZmlsZUJvb2sgfHwge307XHJ3aW5kb3cuUHJvZmlsZUJvb2sub24gPSB3aW5kb3cuUHJvZmlsZUJvb2sub24gfHwge307XHJccihmdW5jdGlvbigpe1xyXHR2YXIgaGVhZFBhbmVsLCBhY3RpdmVQYW5lbDtcclx0dmFyIHRhc2tzID0ge1xyXHRcdGluaXQgOiBmdW5jdGlvbigpe1xyXHRcdFx0YWN0aXZlUGFuZWwgPSBoZWFkUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFByb2ZpbGVCb29rLmNvbmZpZy5oZWFkUGFuZWwucXVlcnkpO1xyXHRcdFx0dGFza3MudHJhbnNpdGlvbigpO1xyXHRcdH0sXHJcdFx0dHJhbnNpdGlvbiA6IGZ1bmN0aW9uKCl7XHJcdFx0XHR2YXIgaGFzaCA9ICghIXdpbmRvdy5sb2NhdGlvbi5oYXNoICYmICEhZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3aW5kb3cubG9jYXRpb24uaGFzaCkpID8gd2luZG93LmxvY2F0aW9uLmhhc2ggOiBcIlwiO1xyXHRcdFx0dmFyIGlzSGVhZCA9ICF3aW5kb3cubG9jYXRpb24uaGFzaCB8fCB3aW5kb3cubG9jYXRpb24uaGFzaCAhPSBoYXNoO1xyXHRcdFx0XHJcdFx0XHRpZihpc0hlYWQpe1xyXHRcdFx0XHRoaXN0b3J5LnJlcGxhY2VTdGF0ZShcInJvb3RcIiwgbnVsbCwgbG9jYXRpb24ucGF0aG5hbWUpO1xyXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1wYWdlZFwiKTtcclx0XHRcdH1cclx0XHRcdGVsc2V7XHJcdFx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImlzLXBhZ2VkXCIpO1xyXHRcdFx0fVxyXHRcdFx0XHJcdFx0XHRpZighIWhhc2ggJiYgaGVhZFBhbmVsID09PSBhY3RpdmVQYW5lbCl7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoYXNoKTtcclx0XHRcdFx0YWN0aXZlUGFuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XHJcdFx0XHRcdGhlYWRQYW5lbC5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZVkoMTgwZGVnKVwiO1xyXHRcdFx0fVxyXHRcdFx0aWYoIWhhc2ggJiYgaGVhZFBhbmVsICE9PSBhY3RpdmVQYW5lbCl7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWSgtMTgwZGVnKVwiO1xyXHRcdFx0XHRoZWFkUGFuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XHJcdFx0XHRcdGFjdGl2ZVBhbmVsID0gaGVhZFBhbmVsO1xyXHRcdFx0fVxyXHRcdH1cclx0fTtcclx0UHJvZmlsZUJvb2suaW5pdFBhZ2VUcmFuc2l0aW9uID0gdGFza3MuaW5pdDtcclx0UHJvZmlsZUJvb2sub24ucGFnZVRyYW5zaXRpb24gPSB0YXNrcy50cmFuc2l0aW9uO1xyfSkoKTsiLCJ3aW5kb3cuUHJvZmlsZUJvb2sgPSB3aW5kb3cuUHJvZmlsZUJvb2sgfHwge307XHJ3aW5kb3cuUHJvZmlsZUJvb2sub24gPSB3aW5kb3cuUHJvZmlsZUJvb2sub24gfHwge307XHJccmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCl7XHJcdFByb2ZpbGVCb29rLmluaXRQYWdlVHJhbnNpdGlvbigpO1xyXHRQcm9maWxlQm9vay51dGlsLnF1ZXJ5RWFjaChcIi5jLXRleHR1cmVfbG9nb1wiLCBQcm9maWxlQm9vay5zZXR1cExvZ28pO1xyXHRQcm9maWxlQm9vay51dGlsLnF1ZXJ5RWFjaChcIi5jLW1haW5fbWVudV9fZnJhbWVcIiwgUHJvZmlsZUJvb2suc2V0dXBNZW51KTtcclx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsIFByb2ZpbGVCb29rLm9uLnBhZ2VUcmFuc2l0aW9uKTtccn0sIGZhbHNlKTsiXX0=
