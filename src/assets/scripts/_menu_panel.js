window.ProfileBook = window.ProfileBook || {};window.ProfileBook.on = window.ProfileBook.on || {};(function(){	window.ProfileBook.setupMenu = function(target){		var isLocked = false;		var isActive = false;				var tasks = {			activate : function(flag){				if(typeof ProfileBook.on.menuActive == "function"){					ProfileBook.on.menuActive(flag);				}				(target.classList[flag ? "add" : "remove"])(ProfileBook.config.menu.activeClassName);				isActive = flag;			},			adjustSize : function(){				var menuSize = ProfileBook.config.menu.size()				var size = Math.min(menuSize, Math.round(window.innerHeight * 0.7), Math.round(window.innerWidth * 0.75));				var scale = Math.round(100 * size / menuSize) / 100;				target.parentNode.style.transform = "scale(" + scale + ")";			}		};				var anchors = target.querySelectorAll("A");		for(var i=0; i<anchors.length; i++){			anchors[i].addEventListener("click", function(event){				isLocked = true;			}, false);		}			target.addEventListener("mouseover", function(event){			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);		target.addEventListener("touchstart", function(event){			if(!isActive){				event.preventDefault();			}			event.stopPropagation();			isLocked = false;			tasks.activate(true);		}, false);				target.addEventListener("mouseout", function(event){			event.stopPropagation();			if(!isLocked){				tasks.activate(false);			}		}, false);		document.addEventListener("touchstart", function(event){			event.stopPropagation();			tasks.activate(false);		}, false);						tasks.adjustSize();		ProfileBook.on.resize = ProfileBook.on.resize || new Array();		ProfileBook.on.resize.push(tasks.adjustSize);	};})();